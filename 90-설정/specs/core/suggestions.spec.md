# 지능형 제안 Spec

## 목적
Claude가 사용자에게 적절한 시점에 MOC/개념 연결을 제안

## 제안 트리거

### MOC 제안 시점
- 핵심개념 생성 시 (create 시나리오)
- 자료정리 생성 시 (process 시나리오)
- 사용자가 명시적으로 "연결 제안해줘" 요청

### 관련 개념 제안 시점
- 핵심개념 생성 시
- 태그가 2개 이상인 경우 우선

## 제안 프로세스

### Step 1: 파일 목록 가져오기
```bash
# MOC 목록
python3 orchestrator.py list_mocs

# 핵심개념 목록  
python3 orchestrator.py list_concepts

# 특정 파일 미리보기
python3 orchestrator.py preview <filepath>
```

### Step 2: Claude가 분석
1. 현재 노트의 태그/제목/내용 분석
2. 기존 MOC/개념의 태그/제목/내용 스캔
3. 유사도 판단 (태그 매칭 > 제목 유사성 > 내용 관련성)

### Step 3: 제안 형식
```
💡 **연결 제안**

이 개념과 관련된 항목을 발견했습니다:

**MOC 추가 권장:**
- [[맵-AI시스템]] - 태그 일치: #ai, #system
- [[맵-머신러닝]] - 내용 관련성: 학습, 모델

**관련 개념:**
- [[개념-20241103a-딥러닝]] - 태그 일치: #ai, #neural-network  
- [[개념-20241101b-강화학습]] - 상위 개념

연결하시겠습니까? (yes/no)
```

## 제안 품질 기준

### 우선순위 (높음 → 낮음)
1. **태그 2개 이상 일치** - 강력히 추천
2. **태그 1개 일치 + 제목 유사** - 추천
3. **내용 키워드 3개 이상 일치** - 제안
4. **상위/하위 개념 관계** - 참고

### 제안 개수
- MOC: 1-3개 (너무 많으면 혼란)
- 관련 개념: 2-5개

### 제외 조건
- 이미 링크된 항목
- 보관 폴더(80-보관)의 항목
- 완료된 프로젝트

## 자동 실행 여부
- ❌ 자동 실행 금지
- ✅ 사용자 확인 후 실행
- 사용자가 "yes"하면 Claude가 파일에 링크 추가

## 유사도 계산 가이드라인

### 태그 매칭 (가중치: 50%)
- 2개 이상 일치: 강력 추천
- 1개 일치: 추천 고려

### 제목 유사성 (가중치: 30%)
- 동일 키워드 포함
- 상위/하위 개념 관계
- 동의어 관계

### 내용 관련성 (가중치: 20%)
- 본문에서 상호 참조
- 같은 출처(source) 공유
- 유사한 컨텍스트

## 제안 예시

### 좋은 제안
```
현재: 개념-20241104a-머신러닝.md (#ai, #ml)

제안:
1. [[맵-AI시스템]] - 태그 2개 일치 (#ai, #system) ⭐⭐⭐
2. [[개념-20241103a-딥러닝]] - 태그 1개 일치 + 하위 개념 ⭐⭐
3. [[개념-20241101a-지도학습]] - 태그 1개 일치 ⭐
```

### 나쁜 제안
```
현재: 개념-20241104a-머신러닝.md (#ai, #ml)

❌ 제안하지 말 것:
- [[맵-요리레시피]] - 관련 없음
- [[개념-20230101a-머신러닝]] - 이미 동일 주제
- [[프로젝트/완료된프로젝트]] - 완료된 항목
```
