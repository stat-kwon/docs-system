# 캡처 시나리오 Spec

## 트리거 키워드
- "저장해줘", "메모해줘", "기록해줘"
- "아이디어", "질문", "할일", "TODO"
- "웹 클리핑", "원문 저장"

## 행동 규칙

### 1. 타입 식별
- `idea`: 아이디어나 생각
- `question`: 질문이나 의문
- `todo`: 할일이나 작업

### 2. 템플릿 사용
```
Filesystem:read_file("/90-설정/템플릿-즉흥메모.md")
```

### 3. 저장 경로
- 모든 타입 → `/10-수집/즉흥메모/`
- 파일명: `YYYYMMDD-HHMM-설명.md`

### 4. YAML 메타데이터
```yaml
---
type: idea|question|todo
status: pending
created: YYYY-MM-DD
---
```

### 5. TODO 타입 특별 규칙
```markdown
- [ ] 할일 내용 🔴
- [ ] 하위 작업 🟡
```
- 우선순위: 🔴 high / 🟡 medium / 🟢 low
- 태그 추가: #dev, #research, #study

## 첨부파일 처리 규칙 (원문 저장 시)
### 1. 첨부파일 감지
- 원문에 `![[파일명.확장자]]` 형식 감지
- 지원 형식: 이미지(png, jpg, gif), 문서(pdf, docx), 다이어그램(drawio)

### 2. 저장 경로
- 위치: `/80-보관/첨부파일/YYYYMMDD/`
- 날짜는 원문 파일과 동일한 날짜 사용
- 파일명 충돌 시: `파일명-1.확장자` 형식으로 자동 증가

### 3. 메타데이터 추가
```yaml
attachments:
  - 파일명1.png
  - 파일명2.pdf
```

### 4. 원문 내 참조 유지
- 원문 파일의 `![[파일명]]` 참조는 그대로 유지
- 실제 파일은 `/80-보관/첨부파일/` 하위에 저장

## 링크 규칙
- 초기 생성 시: 링크 불필요
- `status: completed` 시: 결과 노트 링크 필수
- 99-Todo.md는 Dataview 자동 집계 (수동 링크 불필요)

## 검증 체크리스트
- [ ] 올바른 폴더 (/10-수집/즉흥메모/ 또는 /10-수집/원문/)
- [ ] YAML 메타데이터 완전
- [ ] TODO면 Tasks 형식
- [ ] TODO면 우선순위 설정
- [ ] 원문에 첨부파일 있으면 `/80-보관/첨부파일/YYYYMMDD/` 폴더 생성
- [ ] 첨부파일 있으면 YAML에 attachments 필드 추가

## 사용자 질문 (TODO 불명확 시)
- "이 작업의 구체적인 완료 조건은?"
- "언제까지 완료하면 좋을까요?"
- "우선순위는? (🔴/🟡/🟢)"