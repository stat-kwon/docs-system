# 프로세스 시나리오 Spec

## 트리거 키워드
- "정리해줘", "요약해줘", "분석해줘"
- "자료정리 만들어줘", "이해하고 정리"

## 행동 규칙

### 1. 자료정리 생성 절차
1. 원문 확인: `/10-수집/원문/`에서 소스 파일 확인
2. 템플릿 로드: `Filesystem:read_file("/90-설정/템플릿-Literature.md")`
3. 저장 경로: `/20-정리/자료정리/`
4. 파일명: `정리-YYYYMMDD-주제.md`

### 2. 필수 YAML 필드
```yaml
---
type: literature
source: [[YYYYMMDD-출처]]  # ✅ 필수
created: YYYY-MM-DD
tags: [literature/topic]
---
```

### 3. 자료정리 구조
```markdown
## 메타정보
- **출처**: [[원문파일명]]
- **작성일**: YYYY-MM-DD
- **태그**: #literature/ai

## 핵심 요약
[3-5줄 요약]

## 주요 개념
1. 개념1: 설명
2. 개념2: 설명

## 인사이트
- 중요한 발견
- 응용 가능성
```

## 첨부파일 처리 규칙

### 1. 원문의 첨부파일 확인
- 원문 YAML의 `attachments` 필드 확인
- `/80-보관/첨부파일/YYYYMMDD/` 경로의 실제 파일 존재 확인

### 2. 자료정리에서 첨부파일 참조
```markdown
## 주요 도표
![Data Lakehouse 구조](../../80-보관/첨부파일/20251103/data-lakehouse-new.png)
```
- 상대 경로 사용하여 80-보관 폴더의 첨부파일 참조
- Obsidian의 `![[]]` 대신 표준 마크다운 `![]()` 형식 사용

### 3. 메타데이터 연계
```yaml
---
attachments_from_source:
  - data-lakehouse-new.png
  - diagram.drawio.png
---
```
- 원문에서 가져온 첨부파일 목록 기록

## 링크 규칙 (출처 체인)
- **필수**: `source: [[원문]]` YAML 필드
- **필수**: 본문에 `**출처**: [[원문]]` 명시
- 원문 파일 존재 검증 필수

## 핵심개념 파생 제안
자료정리 생성 후 자동 제안:
- "이 자료에서 핵심개념을 추출하시겠습니까?"
- "다음 개념들이 핵심개념 후보입니다: [개념 리스트]"

## 검증 체크리스트
- [ ] source 필드 존재
- [ ] source 파일 실제 존재
- [ ] 올바른 폴더 (/20-정리/자료정리/)
- [ ] 태그 계층구조 (#literature/topic)
- [ ] 파일명 규칙 (정리-YYYYMMDD-주제.md)
- [ ] 원문에 첨부파일 있으면 attachments_from_source 필드 추가
- [ ] 첨부파일 참조 시 올바른 상대 경로 사용